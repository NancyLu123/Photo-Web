{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nancy/Desktop/Photo-Web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nancy/Desktop/Photo-Web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/nancy/Desktop/Photo-Web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Search from\"../components/Search\";import Picture from\"../components/Picture\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Homepage=function Homepage(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];//State指所有圖片知訊\nvar _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),currentSearch=_useState8[0],setCurrentSearch=_useState8[1];var auth=\"563492ad6f91700001000001ac22187f3df749b5ac359637c75cb9b5\";//在第一頁的位置有要15張相片\nvar intialURL=\"https://api.pexels.com/v1/curated?page=1&per_page=15\";var searchURL=\"https://api.pexels.com/v1/search?query=\".concat(currentSearch,\"&per_page=15&page=1\");// 從 pexels api 獲取數據\nvar search=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url){var dataFetch,parsedData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setPage(2);_context.next=3;return fetch(url,{method:\"GET\",headers:{Accept:\"application/json\",Authorization:auth}});case 3:dataFetch=_context.sent;_context.next=6;return dataFetch.json();case 6:parsedData=_context.sent;//在data顯示15張照片\nsetData(parsedData.photos);case 8:case\"end\":return _context.stop();}}},_callee);}));return function search(_x){return _ref.apply(this,arguments);};}();// 加載更多圖片\nvar morepicture=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var newURL,dataFetch,parsedData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(currentSearch===\"\"){newURL=\"https://api.pexels.com/v1/curated?page=\".concat(page,\"&per_page=15\");}else{newURL=\"https://api.pexels.com/v1/search?query=\".concat(currentSearch,\"&per_page=15&page=\").concat(page);}setPage(page+1);_context2.next=4;return fetch(newURL,{method:\"GET\",headers:{Accept:\"application/json\",Authorization:auth}});case 4:dataFetch=_context2.sent;_context2.next=7;return dataFetch.json();case 7:parsedData=_context2.sent;setData(data.concat(parsedData.photos));case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function morepicture(){return _ref2.apply(this,arguments);};}();// 頁面加載時獲取數據\nuseEffect(function(){search(intialURL);},[]);//開啟頁面時直接跑圖片\nuseEffect(function(){if(currentSearch===\"\"){search(intialURL);}else{search(searchURL);}},[currentSearch]);return/*#__PURE__*/_jsxs(\"div\",{style:{minHeight:\"100vh\"},children:[/*#__PURE__*/_jsx(Search,{search:function search(){// JS Closure\nsetCurrentSearch(input);},setInput:setInput}),/*#__PURE__*/_jsx(\"div\",{className:\"pictures\",children:data&&data.map(function(d){return/*#__PURE__*/_jsx(Picture,{data:d});})}),/*#__PURE__*/_jsx(\"div\",{className:\"morePicture\",children:/*#__PURE__*/_jsx(\"button\",{onClick:morepicture,children:\"Load More\"})})]});};export default Homepage;","map":{"version":3,"sources":["/Users/nancy/Desktop/Photo-Web/src/pages/Homepage.js"],"names":["React","useState","useEffect","Search","Picture","Homepage","input","setInput","data","setData","page","setPage","currentSearch","setCurrentSearch","auth","intialURL","searchURL","search","url","fetch","method","headers","Accept","Authorization","dataFetch","json","parsedData","photos","morepicture","newURL","concat","minHeight","map","d"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Search from \"../components/Search\";\r\nimport Picture from \"../components/Picture\";\r\n\r\nconst Homepage = () => {\r\n  const [input, setInput] = useState(\"\");\r\n  //State指所有圖片知訊\r\n  let [data, setData] = useState(null);\r\n  let [page, setPage] = useState(1);\r\n  const [currentSearch, setCurrentSearch] = useState(\"\");\r\n  const auth = \"563492ad6f91700001000001ac22187f3df749b5ac359637c75cb9b5\";\r\n  //在第一頁的位置有要15張相片\r\n  const intialURL = \"https://api.pexels.com/v1/curated?page=1&per_page=15\";\r\n  const searchURL = `https://api.pexels.com/v1/search?query=${currentSearch}&per_page=15&page=1`;\r\n\r\n  // 從 pexels api 獲取數據\r\n  const search = async (url) => {\r\n    setPage(2);\r\n    const dataFetch = await fetch(url, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        Authorization: auth,\r\n      },\r\n    });\r\n    //抓來的圖片\r\n    let parsedData = await dataFetch.json();\r\n    //在data顯示15張照片\r\n    setData(parsedData.photos);\r\n  };\r\n\r\n  // 加載更多圖片\r\n  const morepicture = async () => {\r\n    let newURL;\r\n    if (currentSearch === \"\") {\r\n      newURL = `https://api.pexels.com/v1/curated?page=${page}&per_page=15`;\r\n    } else {\r\n      newURL = `https://api.pexels.com/v1/search?query=${currentSearch}&per_page=15&page=${page}`;\r\n    }\r\n    setPage(page + 1);\r\n    const dataFetch = await fetch(newURL, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        Authorization: auth,\r\n      },\r\n    });\r\n    let parsedData = await dataFetch.json();\r\n    setData(data.concat(parsedData.photos));\r\n  };\r\n\r\n  // 頁面加載時獲取數據\r\n  useEffect(() => {\r\n    search(intialURL);\r\n  }, []);\r\n  //開啟頁面時直接跑圖片\r\n  useEffect(() => {\r\n    if (currentSearch === \"\") {\r\n      search(intialURL);\r\n    } else {\r\n      search(searchURL);\r\n    }\r\n  }, [currentSearch]);\r\n\r\n  return (\r\n    <div style={{ minHeight: \"100vh\" }}>\r\n      <Search\r\n        search={() => {\r\n          // JS Closure\r\n          setCurrentSearch(input);\r\n        }}\r\n        setInput={setInput}\r\n      />\r\n      <div className=\"pictures\">\r\n        {data &&\r\n          data.map((d) => {\r\n            return <Picture data={d} />;\r\n          })}\r\n      </div>\r\n\r\n      <div className=\"morePicture\">\r\n        <button onClick={morepicture}>Load More</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Homepage;\r\n"]},"metadata":{},"sourceType":"module"}