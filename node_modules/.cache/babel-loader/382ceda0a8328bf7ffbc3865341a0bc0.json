{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nancy/Desktop/PhotoWeb/Photo-Web/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/nancy/Desktop/PhotoWeb/Photo-Web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/nancy/Desktop/PhotoWeb/Photo-Web/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Nav from\"../components/Nav\";import{Empty}from\"antd\";import CarouselPicture from\"../components/CarouselPicture\";import Picture from\"../components/Picture\";import{getPhoto,getSearchPhoto}from\"../api/photoApi\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Homepage=function Homepage(){//State指所有圖片知訊\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),page=_useState4[0],setPage=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),currentSearch=_useState6[0],setCurrentSearch=_useState6[1];// 從 pexels api 獲取數據\nvar search=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var dataFetch,parsedData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(currentSearch===\"\")){_context.next=6;break;}_context.next=3;return getPhoto(1);case 3:dataFetch=_context.sent;_context.next=9;break;case 6:_context.next=8;return getSearchPhoto(currentSearch,1);case 8:dataFetch=_context.sent;case 9:parsedData=dataFetch.data.photos;setPage(2);setData(parsedData);case 12:case\"end\":return _context.stop();}},_callee);}));return function search(){return _ref.apply(this,arguments);};}();// 加載更多圖片\nvar morepicture=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var dataFetch,parsedData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!(currentSearch===\"\")){_context2.next=6;break;}_context2.next=3;return getPhoto(page);case 3:dataFetch=_context2.sent;_context2.next=9;break;case 6:_context2.next=8;return getSearchPhoto(currentSearch,page);case 8:dataFetch=_context2.sent;case 9:parsedData=dataFetch.data.photos;setPage(page+1);setData(data.concat(parsedData));case 12:case\"end\":return _context2.stop();}},_callee2);}));return function morepicture(){return _ref2.apply(this,arguments);};}();// 頁面加載時獲取數據\nuseEffect(function(){search();},[currentSearch]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Nav,{setCurrentSearch:setCurrentSearch}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(CarouselPicture,{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"picture-title\",children:currentSearch===\"\"||undefined?\"Featured photos\":\"Photos related to『\"+currentSearch+\"』\"}),data.length===0?/*#__PURE__*/_jsx(Empty,{image:Empty.PRESENTED_IMAGE_SIMPLE}):/*#__PURE__*/_jsx(\"div\",{className:\"pictures\",children:data&&data.map(function(d){return/*#__PURE__*/_jsx(Picture,{data:d});})})]}),data.length!==0&&/*#__PURE__*/_jsx(\"div\",{className:\"morePicture\",children:/*#__PURE__*/_jsx(\"button\",{onClick:morepicture,children:\"Load More\"})})]})]});};export default Homepage;","map":{"version":3,"names":["React","useState","useEffect","Nav","Empty","CarouselPicture","Picture","getPhoto","getSearchPhoto","jsx","_jsx","jsxs","_jsxs","Homepage","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","page","setPage","_useState5","_useState6","currentSearch","setCurrentSearch","search","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dataFetch","parsedData","wrap","_callee$","_context","prev","next","sent","photos","stop","apply","arguments","morepicture","_ref2","_callee2","_callee2$","_context2","concat","children","className","undefined","length","image","PRESENTED_IMAGE_SIMPLE","map","d","onClick"],"sources":["/Users/nancy/Desktop/PhotoWeb/Photo-Web/src/container/Homepage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Nav from \"../components/Nav\";\r\nimport { Empty } from \"antd\";\r\nimport CarouselPicture from \"../components/CarouselPicture\";\r\nimport Picture from \"../components/Picture\";\r\nimport { getPhoto, getSearchPhoto } from \"../api/photoApi\";\r\n\r\nconst Homepage = () => {\r\n  //State指所有圖片知訊\r\n  let [data, setData] = useState([]);\r\n  let [page, setPage] = useState(1);\r\n  const [currentSearch, setCurrentSearch] = useState(\"\");\r\n\r\n  // 從 pexels api 獲取數據\r\n  const search = async () => {\r\n    let dataFetch;\r\n    if (currentSearch === \"\") {\r\n      dataFetch = await getPhoto(1);\r\n    } else {\r\n      dataFetch = await getSearchPhoto(currentSearch, 1);\r\n    }\r\n    let parsedData = dataFetch.data.photos;\r\n    setPage(2);\r\n    setData(parsedData);\r\n  };\r\n\r\n  // 加載更多圖片\r\n  const morepicture = async () => {\r\n    let dataFetch;\r\n    if (currentSearch === \"\") {\r\n      dataFetch = await getPhoto(page);\r\n    } else {\r\n      dataFetch = await getSearchPhoto(currentSearch, page);\r\n    }\r\n    let parsedData = dataFetch.data.photos;\r\n    setPage(page + 1);\r\n    setData(data.concat(parsedData));\r\n  };\r\n\r\n  // 頁面加載時獲取數據\r\n  useEffect(() => {\r\n    search();\r\n  }, [currentSearch]);\r\n\r\n  return (\r\n    <div>\r\n      <Nav setCurrentSearch={setCurrentSearch} />\r\n      <div className=\"content\">\r\n        <CarouselPicture />\r\n        <div>\r\n          <p className=\"picture-title\">\r\n            {currentSearch === \"\" || undefined\r\n              ? \"Featured photos\"\r\n              : \"Photos related to『\" + currentSearch + \"』\"}\r\n          </p>\r\n          {data.length === 0 ? (\r\n            <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} />\r\n          ) : (\r\n            <div className=\"pictures\">\r\n              {data &&\r\n                data.map((d) => {\r\n                  return <Picture data={d} />;\r\n                })}\r\n            </div>\r\n          )}\r\n        </div>\r\n        {data.length !== 0 && (\r\n          <div className=\"morePicture\">\r\n            <button onClick={morepicture}>Load More</button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Homepage;\r\n"],"mappings":"uYAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,GAAG,KAAM,mBAAmB,CACnC,OAASC,KAAK,KAAQ,MAAM,CAC5B,MAAO,CAAAC,eAAe,KAAM,+BAA+B,CAC3D,MAAO,CAAAC,OAAO,KAAM,uBAAuB,CAC3C,OAASC,QAAQ,CAAEC,cAAc,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE3D,GAAM,CAAAC,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAA,CAAS,CACrB;AACA,IAAAC,SAAA,CAAsBb,QAAQ,CAAC,EAAE,CAAC,CAAAc,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7BG,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IAClB,IAAAI,UAAA,CAAsBlB,QAAQ,CAAC,CAAC,CAAC,CAAAmB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA5BE,IAAI,CAAAD,UAAA,IAAEE,OAAO,CAAAF,UAAA,IAClB,IAAAG,UAAA,CAA0CtB,QAAQ,CAAC,EAAE,CAAC,CAAAuB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAA/CE,aAAa,CAAAD,UAAA,IAAEE,gBAAgB,CAAAF,UAAA,IAEtC;AACA,GAAM,CAAAG,MAAM,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,SAAA,CAAAC,UAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,cAETd,aAAa,GAAK,EAAE,GAAAY,QAAA,CAAAE,IAAA,UAAAF,QAAA,CAAAE,IAAA,SACJ,CAAAhC,QAAQ,CAAC,CAAC,CAAC,QAA7B0B,SAAS,CAAAI,QAAA,CAAAG,IAAA,CAAAH,QAAA,CAAAE,IAAA,gBAAAF,QAAA,CAAAE,IAAA,SAES,CAAA/B,cAAc,CAACiB,aAAa,CAAE,CAAC,CAAC,QAAlDQ,SAAS,CAAAI,QAAA,CAAAG,IAAA,QAEPN,UAAU,CAAGD,SAAS,CAAChB,IAAI,CAACwB,MAAM,CACtCnB,OAAO,CAAC,CAAC,CAAC,CACVJ,OAAO,CAACgB,UAAU,CAAC,CAAC,yBAAAG,QAAA,CAAAK,IAAA,MAAAV,OAAA,GACrB,kBAVK,CAAAL,MAAMA,CAAA,SAAAC,IAAA,CAAAe,KAAA,MAAAC,SAAA,OAUX,CAED;AACA,GAAM,CAAAC,WAAW,6BAAAC,KAAA,CAAAjB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAgB,SAAA,MAAAd,SAAA,CAAAC,UAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAa,UAAAC,SAAA,iBAAAA,SAAA,CAAAX,IAAA,CAAAW,SAAA,CAAAV,IAAA,cAEdd,aAAa,GAAK,EAAE,GAAAwB,SAAA,CAAAV,IAAA,UAAAU,SAAA,CAAAV,IAAA,SACJ,CAAAhC,QAAQ,CAACc,IAAI,CAAC,QAAhCY,SAAS,CAAAgB,SAAA,CAAAT,IAAA,CAAAS,SAAA,CAAAV,IAAA,gBAAAU,SAAA,CAAAV,IAAA,SAES,CAAA/B,cAAc,CAACiB,aAAa,CAAEJ,IAAI,CAAC,QAArDY,SAAS,CAAAgB,SAAA,CAAAT,IAAA,QAEPN,UAAU,CAAGD,SAAS,CAAChB,IAAI,CAACwB,MAAM,CACtCnB,OAAO,CAACD,IAAI,CAAG,CAAC,CAAC,CACjBH,OAAO,CAACD,IAAI,CAACiC,MAAM,CAAChB,UAAU,CAAC,CAAC,CAAC,yBAAAe,SAAA,CAAAP,IAAA,MAAAK,QAAA,GAClC,kBAVK,CAAAF,WAAWA,CAAA,SAAAC,KAAA,CAAAH,KAAA,MAAAC,SAAA,OAUhB,CAED;AACA1C,SAAS,CAAC,UAAM,CACdyB,MAAM,CAAC,CAAC,CACV,CAAC,CAAE,CAACF,aAAa,CAAC,CAAC,CAEnB,mBACEb,KAAA,QAAAuC,QAAA,eACEzC,IAAA,CAACP,GAAG,EAACuB,gBAAgB,CAAEA,gBAAiB,CAAE,CAAC,cAC3Cd,KAAA,QAAKwC,SAAS,CAAC,SAAS,CAAAD,QAAA,eACtBzC,IAAA,CAACL,eAAe,GAAE,CAAC,cACnBO,KAAA,QAAAuC,QAAA,eACEzC,IAAA,MAAG0C,SAAS,CAAC,eAAe,CAAAD,QAAA,CACzB1B,aAAa,GAAK,EAAE,EAAI4B,SAAS,CAC9B,iBAAiB,CACjB,oBAAoB,CAAG5B,aAAa,CAAG,GAAG,CAC7C,CAAC,CACHR,IAAI,CAACqC,MAAM,GAAK,CAAC,cAChB5C,IAAA,CAACN,KAAK,EAACmD,KAAK,CAAEnD,KAAK,CAACoD,sBAAuB,CAAE,CAAC,cAE9C9C,IAAA,QAAK0C,SAAS,CAAC,UAAU,CAAAD,QAAA,CACtBlC,IAAI,EACHA,IAAI,CAACwC,GAAG,CAAC,SAACC,CAAC,CAAK,CACd,mBAAOhD,IAAA,CAACJ,OAAO,EAACW,IAAI,CAAEyC,CAAE,CAAE,CAAC,CAC7B,CAAC,CAAC,CACD,CACN,EACE,CAAC,CACLzC,IAAI,CAACqC,MAAM,GAAK,CAAC,eAChB5C,IAAA,QAAK0C,SAAS,CAAC,aAAa,CAAAD,QAAA,cAC1BzC,IAAA,WAAQiD,OAAO,CAAEd,WAAY,CAAAM,QAAA,CAAC,WAAS,CAAQ,CAAC,CAC7C,CACN,EACE,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAtC,QAAQ"},"metadata":{},"sourceType":"module"}